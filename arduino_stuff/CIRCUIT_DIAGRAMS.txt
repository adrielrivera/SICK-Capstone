================================================================================
                      PBT SENSOR CIRCUIT DIAGRAMS
================================================================================

NOTE: These are ASCII diagrams. For actual PCB layout, consider using
      Fritzing, KiCAD, or EasyEDA.

================================================================================
CIRCUIT 1: BASIC (Minimum Components)
================================================================================
Use for: Initial testing, low-sensitivity applications

Components:
- PBT piezoelectric sensor
- 1MÎ© resistor (brown-black-green or color code)
- 10ÂµF capacitor (optional, for AC coupling)
- Wires

Diagram:

    PBT Sensor
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   +    â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”  (10ÂµF capacitor, optional AC coupling)
        â”‚      C1     â”‚
        â”‚             â”‚
        â”‚             â”œâ”€â”€â”€ 1MÎ© â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Arduino A0
        â”‚             â”‚      R1   â”‚
        â”‚             â”‚           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Arduino GND

Alternative (No Capacitor):

    PBT(+) â”€â”€â”€ 1MÎ© â”€â”€â”¬â”€â”€â”€ Arduino A0
                     â”‚
    PBT(-) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€ Arduino GND

Pros: Simple, cheap (~$2 total)
Cons: Low sensitivity, may miss weak impacts

================================================================================
CIRCUIT 2: WITH AMPLIFIER (Recommended)
================================================================================
Use for: Better sensitivity, production systems

Components:
- PBT sensor
- LM358 dual op-amp IC (or TL072)
- 2x 10kÎ© resistors (for voltage divider)
- 2x 10kÎ© resistors (for op-amp gain)
- 100kÎ© resistor (higher gain option)
- 10ÂµF capacitor (AC coupling)
- 100nF capacitor (decoupling)
- 9V or 5V power supply

Diagram:

         +5V
          â”‚
          â”œâ”€â”€â”€â”€â”€ 100nF â”€â”€â”€â”¬â”€â”€â”€ GND  (Power decoupling)
          â”‚               â”‚
          â”‚      10kÎ©     â”‚
    +5V â”€â”€â”´â”€â”€â”€â”€â”€â”€R3â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€ 2.5V Reference
                          â”‚
                         R4
                         10kÎ©
                          â”‚
                         GND

    PBT Sensor                    LM358 Op-Amp
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   +    â”‚                   â”‚           â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        10kÎ©       â”‚  â”Œâ”€â”€â”€â”€â”   â”‚
        â”‚             R1    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”¤ +  â”‚   â”‚
        â”œâ”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€/\/\â”€â”¤    â”‚  â”‚    â”œâ”€â”€â”€â”¼â”€â”€â”¬â”€â”€â”€ Arduino A0
        â”‚   C1    â”‚         â”‚    â”‚  â”‚ -  â”‚   â”‚  â”‚
        â”‚   10ÂµF  â”‚    2.5V â”´    â”‚  â””â”€â”¬â”€â”€â”˜   â”‚  â”‚
        â”‚         â”‚    Ref       â”‚    â”‚      â”‚  â”‚
        â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤      â”‚  â”‚
        â”‚                        â”‚    â”‚      â”‚  â”‚
        â”‚                   10kÎ© â”‚    â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¤
        â”‚                   R2   â”‚    (or    â”‚  â”‚
        â”‚                        â”‚   100kÎ©   â”‚  â”‚
        â”‚                        â”‚   for 11x â”‚  â”‚
        â”‚                        â”‚   gain)   â”‚  â”‚
        â”‚                        â”‚           â”‚  â”‚
        â”‚                        â”‚  Pin 4    â”‚  â”‚
        â”‚                        â”œâ”€â”€â”€GND     â”‚  â”‚
        â”‚                        â”‚  Pin 8    â”‚  â”‚
        â”‚                        â”œâ”€â”€â”€+5V     â”‚  â”‚
        â”‚                        â”‚           â”‚  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”´â”€â”€â”€ GND

Gain Formula: Gain = 1 + (R2 / R1)
- 10kÎ©/10kÎ© = 2x gain
- 100kÎ©/10kÎ© = 11x gain
- Adjust R2 to tune sensitivity

Pin Connections for LM358:
- Pin 1: Output â†’ Arduino A0
- Pin 2: Inverting input (-) â†’ Feedback + offset
- Pin 3: Non-inverting input (+) â†’ Sensor input
- Pin 4: GND
- Pin 5-7: Second op-amp (unused or use for buffering)
- Pin 8: VCC (+5V)

Pros: Good sensitivity, adjustable gain, stable baseline
Cons: More complex, needs multiple components

================================================================================
CIRCUIT 3: SIMPLIFIED AMPLIFIER (Good Compromise)
================================================================================
Use for: When you want amplification without complexity

Components:
- PBT sensor
- LM358 or TL071 op-amp
- 1x 100kÎ© resistor
- 1x 10kÎ© resistor
- 10ÂµF capacitor
- 100nF decoupling cap

Simplified Non-Inverting Amp:

                              +5V
                               â”‚
                               â”œâ”€â”€â”€ 100nF â”€â”€â”€ GND
                               â”‚
                           â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    PBT(+) â”€â”€â”¤â”œâ”€â”€â”€ 10kÎ© â”€â”€â”¤ +   8 â”œâ”€â”€â”€ +5V
            10ÂµF           â”‚       â”‚
    PBT(-) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¤ -   1 â”œâ”€â”€â”¬â”€â”€â”€ Arduino A0
                       â”‚   â”‚       â”‚  â”‚
                       â”‚   â”‚ GND 4 â”œâ”€â”€â”´â”€â”€â”€ GND
                      â”€â”´â”€  â””â”€â”€â”€â”€â”€â”€â”€â”˜
                     100kÎ©   LM358

Gain â‰ˆ 11x

Pros: Simple but effective, good starting point
Cons: Fixed gain (need to change resistor to adjust)

================================================================================
COMPONENT SPECIFICATIONS
================================================================================

Piezoelectric Sensor:
- Type: Contact microphone or piezo disc
- Size: 20-35mm diameter typical
- Impedance: High (1MÎ© or more)
- Output: 10mV to 1V depending on impact
- Example: Sparkfun SEN-09196, Adafruit 1740

LM358 Op-Amp:
- Cheap (~$0.30)
- Dual op-amp (can use one or both)
- Single supply (5V works)
- Low noise
- 8-pin DIP package (breadboard friendly)
- Alternative: TL072 (lower noise, better quality)

Resistor Values:
- 1MÎ© (brown-black-green): Input impedance
- 10kÎ© (brown-black-orange): Gain setting, voltage divider
- 100kÎ© (brown-black-yellow): Higher gain option

Capacitor Values:
- 10ÂµF electrolytic: AC coupling (blocks DC)
- 100nF ceramic: Power supply decoupling (reduces noise)

================================================================================
BREADBOARD LAYOUT (Basic Circuit)
================================================================================

    Arduino Board
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
    â”‚   GND â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ Breadboard GND rail
    â”‚               â”‚         â”‚
    â”‚   A0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€ Breadboard row 5
    â”‚               â”‚         â”‚
    â”‚               â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚
    Breadboard:     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ + Rail        â”‚                 â”‚
    â”‚ - Rail â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€ â”‚  GND rail
    â”‚                         â”‚       â”‚
    â”‚  Row 1:  PBT (+) â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€ â”‚
    â”‚                         â”‚       â”‚
    â”‚  Row 2:   â”‚             â”‚       â”‚
    â”‚           â”‚             â”‚       â”‚
    â”‚  Row 3:   â”œâ”€â”€â”€ 1MÎ© â”€â”€â”€â”€â”€â”¤       â”‚
    â”‚           â”‚             â”‚       â”‚
    â”‚  Row 4:   â”‚             â”‚       â”‚
    â”‚           â”‚             â”‚       â”‚
    â”‚  Row 5:   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€ â”‚  To Arduino A0
    â”‚                                 â”‚
    â”‚  Row 6:  PBT (-) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  To GND
    â”‚                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
TESTING PROCEDURE
================================================================================

Step 1: Build Basic Circuit (No Arduino)
    - Connect PBT sensor with 1MÎ© resistor
    - Use multimeter in DC voltage mode
    - Measure voltage at junction
    - Tap sensor, should see voltage change

Step 2: Connect to Arduino
    - Upload pbt_sensor_basic.ino
    - Connect circuit to A0 and GND
    - Open Serial Monitor (115200 baud)
    - Should see numbers streaming

Step 3: Verify Signal Range
    - No impact: Should be ~512 (or some stable value)
    - Light tap: Should spike up or down by 50-200
    - Hard impact: Should spike more (but not clipping at 0 or 1023)

Step 4: Adjust Gain (if needed)
    - Too sensitive (clipping): Reduce gain or add voltage divider
    - Not sensitive enough: Add amplifier circuit

================================================================================
TROUBLESHOOTING
================================================================================

Problem: Flat line at 0
Solution: 
    - Check if GND is connected
    - Verify resistor is connected to A0
    - Check for short circuit

Problem: Flat line at 512 (or any value, no change on impact)
Solution:
    - Check sensor connections (might be reversed)
    - Test sensor with multimeter (should produce voltage when tapped)
    - Verify sensor is actually piezoelectric (not speaker)

Problem: Flat line at 1023
Solution:
    - A0 might be floating (not connected)
    - Check breadboard connections
    - Verify code is reading correct pin

Problem: Signal too weak (small changes)
Solution:
    - Add amplifier circuit
    - Use larger resistor (try 10MÎ©)
    - Check sensor mounting (needs good mechanical coupling)

Problem: Signal too noisy
Solution:
    - Add 100nF capacitor between A0 and GND (low-pass filter)
    - Use shielded cable for sensor
    - Move away from power supplies or motors
    - Use averaged or full version of Arduino code

Problem: Baseline drifts over time
Solution:
    - Add AC coupling capacitor (10ÂµF)
    - Use calibrated version of Arduino code
    - Check for temperature effects on sensor

Problem: Op-amp not working
Solution:
    - Verify pin connections (check datasheet)
    - Check power supply (should have 5V on pin 8)
    - Measure 2.5V reference voltage
    - Try simpler circuit first

================================================================================
ADVANCED: FREQUENCY RESPONSE
================================================================================

If you need to filter specific frequencies:

Low-Pass Filter (Remove high-frequency noise):
    
    Arduino A0 â”€â”€â”€â”€ 10kÎ© â”€â”€â”¬â”€â”€â”€ From sensor circuit
                           â”‚
                          â•â•ªâ• 100nF (Cutoff â‰ˆ 160 Hz)
                           â”‚
                          GND

High-Pass Filter (Remove low-frequency rumble):

    From sensor â”€â”€â”¤â”œâ”€â”€â”€ Arduino A0
                 100nF
                   â”‚
                  â”€â”´â”€ 10kÎ© to GND
                   
    (Cutoff â‰ˆ 160 Hz)

For PBT impacts, typically:
- Useful signal: 50 Hz to 500 Hz
- Noise: < 10 Hz (vibration) or > 1 kHz (electrical)

Cutoff frequency formula: f = 1 / (2Ï€ Ã— R Ã— C)

================================================================================
PARTS LIST FOR SHOPPING
================================================================================

Basic Setup ($5-10):
â–¡ Piezoelectric sensor or contact mic ($2-5)
â–¡ 1MÎ© resistor (5 pack for $1)
â–¡ 10ÂµF capacitor (5 pack for $1)
â–¡ Breadboard ($3)
â–¡ Jumper wires ($2)

Amplified Setup ($10-15):
â–¡ Above parts plus:
â–¡ LM358 op-amp IC ($0.30)
â–¡ 4x 10kÎ© resistors ($1 for 20 pack)
â–¡ 1x 100kÎ© resistor (included in packs)
â–¡ 100nF ceramic capacitor ($1 for 10 pack)

Tools Needed:
â–¡ Arduino (you already have)
â–¡ USB cable (you already have)
â–¡ Multimeter (helpful, ~$15)
â–¡ Soldering iron (for permanent assembly, ~$20)

Where to Buy:
- Online: DigiKey, Mouser, SparkFun, Adafruit, Amazon
- Local: RadioShack (if still around), electronics stores
- Cheap: AliExpress, eBay (longer shipping)

================================================================================

Good luck with your hardware build! ğŸ”§

For more details, see REAL_PBT_IMPLEMENTATION_GUIDE.md

