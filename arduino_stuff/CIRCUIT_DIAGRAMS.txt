================================================================================
                      PBT SENSOR CIRCUIT DIAGRAMS
================================================================================

NOTE: These are ASCII diagrams. For actual PCB layout, consider using
      Fritzing, KiCAD, or EasyEDA.

================================================================================
CIRCUIT 1: BASIC (Minimum Components)
================================================================================
Use for: Initial testing, low-sensitivity applications

Components:
- PBT piezoelectric sensor
- 1MΩ resistor (brown-black-green or color code)
- 10µF capacitor (optional, for AC coupling)
- Wires

Diagram:

    PBT Sensor
    ┌────────┐
    │   +    │
    └───┬────┘
        │
        ├──────┤├────┐  (10µF capacitor, optional AC coupling)
        │      C1     │
        │             │
        │             ├─── 1MΩ ──┬─────────── Arduino A0
        │             │      R1   │
        │             │           │
        └─────────────┴───────────┴─────────── Arduino GND

Alternative (No Capacitor):

    PBT(+) ─── 1MΩ ──┬─── Arduino A0
                     │
    PBT(-) ──────────┴─── Arduino GND

Pros: Simple, cheap (~$2 total)
Cons: Low sensitivity, may miss weak impacts

================================================================================
CIRCUIT 2: WITH AMPLIFIER (Recommended)
================================================================================
Use for: Better sensitivity, production systems

Components:
- PBT sensor
- LM358 dual op-amp IC (or TL072)
- 2x 10kΩ resistors (for voltage divider)
- 2x 10kΩ resistors (for op-amp gain)
- 100kΩ resistor (higher gain option)
- 10µF capacitor (AC coupling)
- 100nF capacitor (decoupling)
- 9V or 5V power supply

Diagram:

         +5V
          │
          ├───── 100nF ───┬─── GND  (Power decoupling)
          │               │
          │      10kΩ     │
    +5V ──┴──────R3───────┼──── 2.5V Reference
                          │
                         R4
                         10kΩ
                          │
                         GND

    PBT Sensor                    LM358 Op-Amp
    ┌────────┐                   ┌───────────┐
    │   +    │                   │           │
    └───┬────┘        10kΩ       │  ┌────┐   │
        │             R1    ┌────┼──┤ +  │   │
        ├───┤├────┬────/\/\─┤    │  │    ├───┼──┬─── Arduino A0
        │   C1    │         │    │  │ -  │   │  │
        │   10µF  │    2.5V ┴    │  └─┬──┘   │  │
        │         │    Ref       │    │      │  │
        │         └──────────────┼────┤      │  │
        │                        │    │      │  │
        │                   10kΩ │    └──────┼──┤
        │                   R2   │    (or    │  │
        │                        │   100kΩ   │  │
        │                        │   for 11x │  │
        │                        │   gain)   │  │
        │                        │           │  │
        │                        │  Pin 4    │  │
        │                        ├───GND     │  │
        │                        │  Pin 8    │  │
        │                        ├───+5V     │  │
        │                        │           │  │
        └────────────────────────┴───────────┴──┴─── GND

Gain Formula: Gain = 1 + (R2 / R1)
- 10kΩ/10kΩ = 2x gain
- 100kΩ/10kΩ = 11x gain
- Adjust R2 to tune sensitivity

Pin Connections for LM358:
- Pin 1: Output → Arduino A0
- Pin 2: Inverting input (-) → Feedback + offset
- Pin 3: Non-inverting input (+) → Sensor input
- Pin 4: GND
- Pin 5-7: Second op-amp (unused or use for buffering)
- Pin 8: VCC (+5V)

Pros: Good sensitivity, adjustable gain, stable baseline
Cons: More complex, needs multiple components

================================================================================
CIRCUIT 3: SIMPLIFIED AMPLIFIER (Good Compromise)
================================================================================
Use for: When you want amplification without complexity

Components:
- PBT sensor
- LM358 or TL071 op-amp
- 1x 100kΩ resistor
- 1x 10kΩ resistor
- 10µF capacitor
- 100nF decoupling cap

Simplified Non-Inverting Amp:

                              +5V
                               │
                               ├─── 100nF ─── GND
                               │
                           ┌───┴───┐
    PBT(+) ──┤├─── 10kΩ ──┤ +   8 ├─── +5V
            10µF           │       │
    PBT(-) ────────────┬───┤ -   1 ├──┬─── Arduino A0
                       │   │       │  │
                       │   │ GND 4 ├──┴─── GND
                      ─┴─  └───────┘
                     100kΩ   LM358

Gain ≈ 11x

Pros: Simple but effective, good starting point
Cons: Fixed gain (need to change resistor to adjust)

================================================================================
COMPONENT SPECIFICATIONS
================================================================================

Piezoelectric Sensor:
- Type: Contact microphone or piezo disc
- Size: 20-35mm diameter typical
- Impedance: High (1MΩ or more)
- Output: 10mV to 1V depending on impact
- Example: Sparkfun SEN-09196, Adafruit 1740

LM358 Op-Amp:
- Cheap (~$0.30)
- Dual op-amp (can use one or both)
- Single supply (5V works)
- Low noise
- 8-pin DIP package (breadboard friendly)
- Alternative: TL072 (lower noise, better quality)

Resistor Values:
- 1MΩ (brown-black-green): Input impedance
- 10kΩ (brown-black-orange): Gain setting, voltage divider
- 100kΩ (brown-black-yellow): Higher gain option

Capacitor Values:
- 10µF electrolytic: AC coupling (blocks DC)
- 100nF ceramic: Power supply decoupling (reduces noise)

================================================================================
BREADBOARD LAYOUT (Basic Circuit)
================================================================================

    Arduino Board
    ┌─────────────────────────┐
    │                         │
    │   GND ────────┬─────────┼── Breadboard GND rail
    │               │         │
    │   A0 ─────────┼─────────┼── Breadboard row 5
    │               │         │
    │               │         │
    └───────────────┼─────────┘
                    │
                    │
    Breadboard:     │
    ┌───────────────┼─────────────────┐
    │ + Rail        │                 │
    │ - Rail ───────┴─────────┬────── │  GND rail
    │                         │       │
    │  Row 1:  PBT (+) ───────┼────── │
    │                         │       │
    │  Row 2:   │             │       │
    │           │             │       │
    │  Row 3:   ├─── 1MΩ ─────┤       │
    │           │             │       │
    │  Row 4:   │             │       │
    │           │             │       │
    │  Row 5:   └─────────────┴────── │  To Arduino A0
    │                                 │
    │  Row 6:  PBT (-) ───────────────┤  To GND
    │                                 │
    └─────────────────────────────────┘

================================================================================
TESTING PROCEDURE
================================================================================

Step 1: Build Basic Circuit (No Arduino)
    - Connect PBT sensor with 1MΩ resistor
    - Use multimeter in DC voltage mode
    - Measure voltage at junction
    - Tap sensor, should see voltage change

Step 2: Connect to Arduino
    - Upload pbt_sensor_basic.ino
    - Connect circuit to A0 and GND
    - Open Serial Monitor (115200 baud)
    - Should see numbers streaming

Step 3: Verify Signal Range
    - No impact: Should be ~512 (or some stable value)
    - Light tap: Should spike up or down by 50-200
    - Hard impact: Should spike more (but not clipping at 0 or 1023)

Step 4: Adjust Gain (if needed)
    - Too sensitive (clipping): Reduce gain or add voltage divider
    - Not sensitive enough: Add amplifier circuit

================================================================================
TROUBLESHOOTING
================================================================================

Problem: Flat line at 0
Solution: 
    - Check if GND is connected
    - Verify resistor is connected to A0
    - Check for short circuit

Problem: Flat line at 512 (or any value, no change on impact)
Solution:
    - Check sensor connections (might be reversed)
    - Test sensor with multimeter (should produce voltage when tapped)
    - Verify sensor is actually piezoelectric (not speaker)

Problem: Flat line at 1023
Solution:
    - A0 might be floating (not connected)
    - Check breadboard connections
    - Verify code is reading correct pin

Problem: Signal too weak (small changes)
Solution:
    - Add amplifier circuit
    - Use larger resistor (try 10MΩ)
    - Check sensor mounting (needs good mechanical coupling)

Problem: Signal too noisy
Solution:
    - Add 100nF capacitor between A0 and GND (low-pass filter)
    - Use shielded cable for sensor
    - Move away from power supplies or motors
    - Use averaged or full version of Arduino code

Problem: Baseline drifts over time
Solution:
    - Add AC coupling capacitor (10µF)
    - Use calibrated version of Arduino code
    - Check for temperature effects on sensor

Problem: Op-amp not working
Solution:
    - Verify pin connections (check datasheet)
    - Check power supply (should have 5V on pin 8)
    - Measure 2.5V reference voltage
    - Try simpler circuit first

================================================================================
ADVANCED: FREQUENCY RESPONSE
================================================================================

If you need to filter specific frequencies:

Low-Pass Filter (Remove high-frequency noise):
    
    Arduino A0 ──── 10kΩ ──┬─── From sensor circuit
                           │
                          ═╪═ 100nF (Cutoff ≈ 160 Hz)
                           │
                          GND

High-Pass Filter (Remove low-frequency rumble):

    From sensor ──┤├─── Arduino A0
                 100nF
                   │
                  ─┴─ 10kΩ to GND
                   
    (Cutoff ≈ 160 Hz)

For PBT impacts, typically:
- Useful signal: 50 Hz to 500 Hz
- Noise: < 10 Hz (vibration) or > 1 kHz (electrical)

Cutoff frequency formula: f = 1 / (2π × R × C)

================================================================================
PARTS LIST FOR SHOPPING
================================================================================

Basic Setup ($5-10):
□ Piezoelectric sensor or contact mic ($2-5)
□ 1MΩ resistor (5 pack for $1)
□ 10µF capacitor (5 pack for $1)
□ Breadboard ($3)
□ Jumper wires ($2)

Amplified Setup ($10-15):
□ Above parts plus:
□ LM358 op-amp IC ($0.30)
□ 4x 10kΩ resistors ($1 for 20 pack)
□ 1x 100kΩ resistor (included in packs)
□ 100nF ceramic capacitor ($1 for 10 pack)

Tools Needed:
□ Arduino (you already have)
□ USB cable (you already have)
□ Multimeter (helpful, ~$15)
□ Soldering iron (for permanent assembly, ~$20)

Where to Buy:
- Online: DigiKey, Mouser, SparkFun, Adafruit, Amazon
- Local: RadioShack (if still around), electronics stores
- Cheap: AliExpress, eBay (longer shipping)

================================================================================

Good luck with your hardware build! 🔧

For more details, see REAL_PBT_IMPLEMENTATION_GUIDE.md

